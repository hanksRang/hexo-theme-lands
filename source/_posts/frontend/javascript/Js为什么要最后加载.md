---
title: js为什么要最后加载？
date: 2022-04-23 00:45:34
category:
- frontend
- js
tags: js 加载顺序
---

<p>
首先声明，不是所有的场景，都需要最后加载Js。
</p>

<p>
这里说的最后加载，就是在Dom加载完毕之后，再加载Js。先说一下我遇到的问题，我在写博客的时候，需要用到一个插件，是实现文章中的图片点击放大的效果。
其实思路也很简单，就是遍历文章中的所有图片，将每一张图片都注册上点击事件，点击哪一张图片，那张图片就放大。效果也达到预期了，但是有一个问题，偶尔
会出现点击图片之后不按规定的尺寸显示，或者就是点击之后根本就不显示。这个问题说大不大，但是也确实影响用户的操作体验。于是我便跟踪了这个问题。时间久了，
我发现这个问题主要出现在刚进页面的时候。于是我怀疑可能是Js先于Dom加载完成就开始执行，因为图片加载比较慢。放置的位置不对，将js放在页面的最后端，但是这样并未解决问题。
我试着将这一段代码都放在`window.onload = function() {}`包体中，结果确实未再出现同样的问题。
</p>

<p>
总结：出现上述问题的原因，就是实现该点击放大功能的代码，不能在Dom还没有加载完成就开始执行，要达到这样的目的，就是需要使用window.onload函数。
</p>
